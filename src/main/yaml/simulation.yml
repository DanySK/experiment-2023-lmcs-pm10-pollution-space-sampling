incarnation: protelis

variables:
  seed: &seed
    min: 0
    max: 1
    step: 1
    default: 0
  frequency: &frequency
    formula: 1 / 3600 / 1000 # milliseconds
  duration: &duration
    formula: 9 * 365 * 24 * 3600 * 1000 # 9 years in milliseconds
  firstTime:
    formula: 1_356_996_500_000L
    language: kotlin
  spacing: &spacing
    type: ArbitraryVariable
    parameters: [0.25, [0.25, 0.5]]
  error: &error
    type: ArbitraryVariable
    parameters: [0.1, [0.1, 0.2]]

environment:
  type: OSMEnvironment

seeds:
  scenario: *seed
  simulation: *seed

network-model:
  type: Pm10Connections

_gradient: &gradient
  - time-distribution: *frequency
    program: org:protelis:tutorial:distanceTo
  - program: send

deployments:
  type: PM10
  programs: *gradient

export:
#  - type: MongoDBExporter
#    parameters:
#      uri: mongodb://localhost:27017
#      dbName: simulation
#    data:
#      - time
#      - molecule: "org:protelis:tutorial:distanceTo"
#        aggregators: [mean, min, max]
#        value-filter: onlyfinite
  - type: CSVExporter
    parameters:
      fileNameRoot: simulation
      interval: 1
      exportPath: data
    data:
      - time
      - molecule: "org:protelis:tutorial:distanceTo"
        aggregators: [mean, min, max]
        value-filter: onlyfinite

terminate:
  type: AfterTime
  parameters: *duration
